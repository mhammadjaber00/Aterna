# Aterna - Architecture Diagrams

## 1. Architecture Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PLATFORM LAYER                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        Android           â”‚         â”‚             iOS                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ MainActivity         â”‚         â”‚  â”œâ”€ MainViewController          â”‚  â”‚
â”‚  â”‚  â”œâ”€ QuestNotifier        â”‚         â”‚  â”œâ”€ QuestNotifierIos           â”‚  â”‚
â”‚  â”‚  â”œâ”€ DatabaseDriver       â”‚         â”‚  â”œâ”€ DatabaseDriverFactory      â”‚  â”‚
â”‚  â”‚  â””â”€ NotificationActions  â”‚         â”‚  â””â”€ LocalNotifier              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FEATURE LAYER                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Onboarding   â”‚  â”‚    Quest     â”‚  â”‚   Timer     â”‚  â”‚ Class Selection â”‚  â”‚
â”‚  â”‚               â”‚  â”‚              â”‚  â”‚             â”‚  â”‚                â”‚  â”‚
â”‚  â”‚ â”œâ”€ Components â”‚  â”‚ â”œâ”€ QuestStore â”‚  â”‚ â”œâ”€ Screen   â”‚  â”‚ â”œâ”€ Screen       â”‚  â”‚
â”‚  â”‚ â”œâ”€ Screens    â”‚  â”‚ â”œâ”€ Components â”‚  â”‚ â”œâ”€ Ring UI  â”‚  â”‚ â”œâ”€ Animations   â”‚  â”‚
â”‚  â”‚ â””â”€ Store      â”‚  â”‚ â””â”€ Events     â”‚  â”‚ â””â”€ Effects  â”‚  â”‚ â””â”€ Hero Create  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            DOMAIN LAYER                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Services      â”‚  â”‚   Utilities     â”‚  â”‚     Repositories         â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚                 â”‚  â”‚     (Interfaces)         â”‚   â”‚
â”‚  â”‚ â”œâ”€ RewardService â”‚  â”‚ â”œâ”€ QuestPlanner â”‚  â”‚ â”œâ”€ HeroRepository        â”‚   â”‚
â”‚  â”‚ â”œâ”€ TaskNotify    â”‚  â”‚ â”œâ”€ QuestResolverâ”‚  â”‚ â”œâ”€ QuestRepository       â”‚   â”‚
â”‚  â”‚ â””â”€ StatusFx      â”‚  â”‚ â”œâ”€ LootRoller   â”‚  â”‚ â”œâ”€ TaskRepository        â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚ â”œâ”€ RewardBankingâ”‚  â”‚ â”œâ”€ SettingsRepository    â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚ â””â”€ TimeProvider â”‚  â”‚ â””â”€ StatusEffectRepositoryâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        Domain Models                               â”‚   â”‚
â”‚  â”‚  Hero | Quest | Task | Item | ClassType | StatusEffect | Loot     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             DATA LAYER                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Repository Impls  â”‚  â”‚    SqlDelight DB     â”‚  â”‚   External APIs     â”‚ â”‚
â”‚  â”‚                    â”‚  â”‚                      â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â”œâ”€ HeroRepoImpl    â”‚  â”‚ â”œâ”€ AternaDatabase    â”‚  â”‚ â”œâ”€ QuestApi (Mock)  â”‚ â”‚
â”‚  â”‚ â”œâ”€ QuestRepoImpl   â”‚  â”‚ â”œâ”€ HeroEntity        â”‚  â”‚ â””â”€ Settings API     â”‚ â”‚
â”‚  â”‚ â”œâ”€ TaskRepoImpl    â”‚  â”‚ â”œâ”€ QuestLogEntity    â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â”œâ”€ StatusFxImpl    â”‚  â”‚ â”œâ”€ TaskEntity        â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â””â”€ SettingsImpl    â”‚  â”‚ â””â”€ StatusEffectEntityâ”‚  â”‚                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Principles:**

- **Dependency Direction**: Always points downward (Platform â†’ Feature â†’ Domain â†’ Data)
- **Clean Architecture**: Each layer only knows about layers below it
- **Separation of Concerns**: UI logic, business logic, and data access are isolated
- **Platform Independence**: Domain and Data layers are shared across platforms

---

## 2. User Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ATERNA USER JOURNEY                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“± App Launch
    â”‚
    â”œâ”€ First Time User? â”€â”€[YES]â”€â”€â†’ ğŸŒŸ ONBOARDING
    â”‚                              â”‚
    â””â”€ Returning User â”€â”€â”€â”€[NO]â”€â”€â”€â†’ â”‚ â”œâ”€ Welcome Tutorial
                                  â”‚ â”œâ”€ Feature Overview  
                                  â”‚ â”œâ”€ Settings Setup
                                  â”‚ â””â”€ Privacy/Permissions
                                  â”‚
                                  â†“
                              âš”ï¸ CLASS SELECTION
                                  â”‚
                                  â”œâ”€ Choose Class:
                                  â”‚   â”œâ”€ ğŸ›¡ï¸ Warrior (+20% Gold, 1.2x XP)
                                  â”‚   â””â”€ ğŸ”® Mage (+30% XP, 1.3x Gold)
                                  â”‚
                                  â”œâ”€ Character Creation:
                                  â”‚   â”œâ”€ Name Input
                                  â”‚   â”œâ”€ Stats Preview
                                  â”‚   â””â”€ Bonus Explanation
                                  â”‚
                                  â””â”€ Create Hero
                                  â”‚
                                  â†“
                              ğŸ›ï¸ QUEST HUB (Main Dashboard)
                              â”‚
                              â”œâ”€ Hero Stats Display:
                              â”‚   â”œâ”€ Level & XP Progress
                              â”‚   â”œâ”€ Gold Balance
                              â”‚   â”œâ”€ Daily Streak
                              â”‚   â””â”€ Total Focus Time
                              â”‚
                              â”œâ”€ Quick Actions:
                              â”‚   â”œâ”€ ğŸ—¡ï¸ Start New Quest
                              â”‚   â”œâ”€ ğŸ“‹ Manage Tasks (WIP)
                              â”‚   â”œâ”€ ğŸ’ View Inventory (MISSING)
                              â”‚   â””â”€ ğŸ“Š Quest History
                              â”‚
                              â””â”€ Select "Start New Quest"
                              â”‚
                              â†“
                          â° TIMER SELECTION (Quest Setup)
                              â”‚
                              â”œâ”€ Duration Selection:
                              â”‚   â”œâ”€ ğŸ”¥ Short (5-15 min) â†’ 4 events
                              â”‚   â”œâ”€ âš¡ Medium (25-45 min) â†’ 7 events  
                              â”‚   â”œâ”€ ğŸŒŸ Long (60-90 min) â†’ 10 events
                              â”‚   â””â”€ ğŸ† Epic (120+ min) â†’ 15-19 events
                              â”‚
                              â”œâ”€ Quest Preview:
                              â”‚   â”œâ”€ Planned Events Summary
                              â”‚   â”œâ”€ Expected Rewards
                              â”‚   â””â”€ Class Bonus Display
                              â”‚
                              â””â”€ Confirm & Start Quest
                              â”‚
                              â†“
                          ğŸ—¡ï¸ ACTIVE QUEST (Focus Session)
                              â”‚
                              â”œâ”€ Real-time Progress:
                              â”‚   â”œâ”€ â±ï¸ Timer Countdown
                              â”‚   â”œâ”€ ğŸ“Š Progress Ring
                              â”‚   â”œâ”€ ğŸ¯ Next Event Preview
                              â”‚   â””â”€ ğŸ’° Current Rewards
                              â”‚
                              â”œâ”€ Timed Events:
                              â”‚   â”œâ”€ ğŸ‘¹ Mob Encounters
                              â”‚   â”‚   â”œâ”€ Fight (gain XP + gold)
                              â”‚   â”‚   â””â”€ Flee (small XP, no gold)
                              â”‚   â”‚
                              â”‚   â”œâ”€ ğŸ“¦ Treasure Chests
                              â”‚   â”‚   â”œâ”€ Regular (5-20 gold)
                              â”‚   â”‚   â””â”€ Rich (major events)
                              â”‚   â”‚
                              â”‚   â”œâ”€ ğŸ² Quirky Events  
                              â”‚   â”‚   â””â”€ Flavor text + XP
                              â”‚   â”‚
                              â”‚   â””â”€ ğŸ’ Trinkets
                              â”‚       â””â”€ Lore & story elements
                              â”‚
                              â”œâ”€ Player Options:
                              â”‚   â”œâ”€ Continue Focus
                              â”‚   â””â”€ Give Up Early
                              â”‚       â””â”€ âš ï¸ Curse Applied (-50% rewards)
                              â”‚
                              â””â”€ Quest Completion Trigger
                              â”‚
                              â†“
                          ğŸ QUEST COMPLETION (Rewards & Progress)
                              â”‚
                              â”œâ”€ Rewards Summary:
                              â”‚   â”œâ”€ ğŸ’° Gold Earned
                              â”‚   â”œâ”€ â­ XP Gained  
                              â”‚   â”œâ”€ ğŸ’ Items Looted
                              â”‚   â””â”€ ğŸ“ˆ Level Progress
                              â”‚
                              â”œâ”€ Achievements:
                              â”‚   â”œâ”€ ğŸ”¥ Streak Bonuses
                              â”‚   â”œâ”€ ğŸ† Milestones Reached
                              â”‚   â””â”€ ğŸ¯ Focus Time Goals
                              â”‚
                              â”œâ”€ Hero Progression:
                              â”‚   â”œâ”€ Level Up Animation
                              â”‚   â”œâ”€ Stats Updates
                              â”‚   â””â”€ New Abilities Unlocked
                              â”‚
                              â””â”€ Quest Log Entry Created
                              â”‚
                              â†“
                          Return to ğŸ›ï¸ QUEST HUB
                              â”‚
                              â””â”€ Cycle continues...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PARALLEL FLOWS (Future)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ“‹ Task Management Flow:                                                   â”‚
â”‚    Quest Hub â†’ Task List â†’ Task Details â†’ Quest Integration                â”‚
â”‚                                                                             â”‚
â”‚  ğŸ’ Inventory Management:                                                   â”‚
â”‚    Quest Hub â†’ Inventory â†’ Equipment â†’ Stats/Bonuses                       â”‚
â”‚                                                                             â”‚
â”‚  ğŸ­ Crafting System:                                                        â”‚
â”‚    Inventory â†’ Materials â†’ Recipes â†’ Craft Items â†’ Equipment               â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“Š Analytics & Progress:                                                   â”‚
â”‚    Quest Hub â†’ Statistics â†’ Analytics â†’ Goal Setting                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Dependency Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMPONENT DEPENDENCIES                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            UI LAYER                                        â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“± App                ğŸ¨ ClassSelectionScreen        â° TimerScreen         â”‚
â”‚     â”‚                         â”‚                           â”‚                 â”‚
â”‚     â†“                         â†“                           â†“                 â”‚
â”‚  ğŸ§­ AppRootComponent â”€â”€â”€â”€â†’ ğŸ›ï¸ QuestComponent â”€â”€â”€â”€â”€â”€â”€â”€â†’ ğŸ—¡ï¸ QuestStore       â”‚
â”‚     â”‚                         â”‚                           â”‚                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚                               â”‚                           â”‚                 â”‚
â”‚  ğŸŒŸ OnboardingComponent       â”‚                           â”‚                 â”‚
â”‚     â”‚                         â”‚                           â”‚                 â”‚
â”‚     â†“                         â”‚                           â”‚                 â”‚
â”‚  ğŸ“ OnboardingStore           â”‚                           â”‚                 â”‚
â”‚     â”‚                         â”‚                           â”‚                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STATE MANAGEMENT                                   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ—¡ï¸ QuestStore â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚     â”‚                     â”‚                                 â”‚              â”‚
â”‚     â”œâ”€ startQuest()       â”œâ”€ completeQuest()               â”œâ”€ giveUp()     â”‚
â”‚     â”œâ”€ trackProgress()    â”œâ”€ applyRewards()                â””â”€ applyCurse()  â”‚
â”‚     â””â”€ generateEvents()   â””â”€ updateHero()                                   â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â†“                                                                       â”‚
â”‚  ğŸ“ OnboardingStore â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚     â”‚                     â”‚                                 â”‚              â”‚
â”‚     â”œâ”€ setFirstTime()     â”œâ”€ saveSettings()                 â”œâ”€ complete()  â”‚
â”‚     â””â”€ trackProgress()    â””â”€ validateSetup()                â””â”€ navigate()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BUSINESS LOGIC                                      â”‚
â”‚                                                                             â”‚
â”‚  ğŸ”§ QuestPlanner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€ ğŸ¯ QuestResolver â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€ ğŸ’° RewardService â”‚
â”‚     â”‚                     â”‚        â”‚                   â”‚        â”‚           â”‚
â”‚     â”œâ”€ plan()             â”‚        â”œâ”€ resolve()        â”‚        â”œâ”€ apply()  â”‚
â”‚     â”œâ”€ generateEvents()   â”‚        â”œâ”€ calculateRewards()â”‚        â””â”€ modify() â”‚
â”‚     â””â”€ scheduleBeats()    â”‚        â””â”€ createOutcome()  â”‚                    â”‚
â”‚     â”‚                     â”‚        â”‚                   â”‚                    â”‚
â”‚     â”‚                     â”‚        â†“                   â†“                    â”‚
â”‚  ğŸ² LootRoller            â”‚     ğŸ“Š RewardBanking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”„ TimeProvider â”‚
â”‚     â”‚                     â”‚        â”‚                                        â”‚
â”‚     â”œâ”€ rollItem()         â”‚        â”œâ”€ accumulate()                          â”‚
â”‚     â”œâ”€ calculateRarity()  â”‚        â””â”€ distribute()                          â”‚
â”‚     â””â”€ applyBonuses()     â”‚                                                 â”‚
â”‚     â”‚                     â”‚                                                 â”‚
â”‚     â”‚                     â†“                                                 â”‚
â”‚  ğŸ“‹ TaskNotificationService                                                 â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€ scheduleReminders()                                                  â”‚
â”‚     â”œâ”€ sendProgressUpdates()                                                â”‚
â”‚     â””â”€ handleCompletion()                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       REPOSITORY LAYER                                     â”‚
â”‚                                                                             â”‚
â”‚  ğŸ‘¤ HeroRepository â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€ ğŸ—¡ï¸ QuestRepository â”€â”€â”€â”€â”¬â”€â”€â”€â”€ ğŸ“‹ TaskRepository â”‚
â”‚     â”‚                   â”‚        â”‚                   â”‚        â”‚            â”‚
â”‚     â”œâ”€ getHero()        â”‚        â”œâ”€ createQuest()    â”‚        â”œâ”€ getTasks() â”‚
â”‚     â”œâ”€ updateStats()    â”‚        â”œâ”€ logEvent()       â”‚        â”œâ”€ complete() â”‚
â”‚     â”œâ”€ saveProgress()   â”‚        â””â”€ getHistory()     â”‚        â””â”€ schedule()  â”‚
â”‚     â””â”€ calculateLevel() â”‚        â”‚                   â”‚        â”‚            â”‚
â”‚     â”‚                   â”‚        â”‚                   â”‚        â”‚            â”‚
â”‚     â”‚                   â”‚        â†“                   â†“        â†“            â”‚
â”‚  âš¡ StatusEffectRepository    ğŸ“Š SettingsRepository                         â”‚
â”‚     â”‚                            â”‚                                          â”‚
â”‚     â”œâ”€ applyEffect()             â”œâ”€ getUserPrefs()                          â”‚
â”‚     â”œâ”€ checkExpiration()         â”œâ”€ saveConfig()                            â”‚
â”‚     â””â”€ removeExpired()           â””â”€ getTheme()                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA LAYER                                        â”‚
â”‚                                                                             â”‚
â”‚  ğŸ—„ï¸ AternaDatabase â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€ ğŸŒ QuestApi â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€ âš™ï¸ Settings       â”‚
â”‚     â”‚                    â”‚        â”‚                 â”‚        â”‚             â”‚
â”‚     â”œâ”€ HeroEntity        â”‚        â”œâ”€ validateQuest() â”‚        â”œâ”€ get()      â”‚
â”‚     â”œâ”€ QuestLogEntity    â”‚        â”œâ”€ syncProgress()  â”‚        â”œâ”€ set()      â”‚
â”‚     â”œâ”€ TaskEntity        â”‚        â””â”€ uploadResults() â”‚        â””â”€ clear()    â”‚
â”‚     â”œâ”€ StatusEffectEntity â”‚       (Mock Implementation)       â”‚             â”‚
â”‚     â””â”€ Queries           â”‚                                   â”‚             â”‚
â”‚     â”‚                    â”‚                                   â”‚             â”‚
â”‚     â†“                    â†“                                   â†“             â”‚
â”‚  ğŸ“± DatabaseDriverFactory  ğŸ”” NotificationService                           â”‚
â”‚     â”‚                        â”‚                                             â”‚
â”‚     â”œâ”€ iOS Driver            â”œâ”€ iOS Notifier                               â”‚
â”‚     â””â”€ Android Driver        â””â”€ Android Notifier                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CRITICAL GAPS IDENTIFIED                            â”‚
â”‚                                                                             â”‚
â”‚  âŒ Missing: QuestStore implementation (referenced in DI but doesn't exist) â”‚
â”‚  âŒ Missing: OnboardingStore implementation (causes DI injection failure)   â”‚
â”‚  âŒ Missing: ViewModels layer (empty module in CommonKoinModule)            â”‚
â”‚  âŒ Missing: Quest execution UI (timer connects to planning, not execution) â”‚
â”‚  âŒ Missing: Quest Hub main screen (navigation exists, implementation doesn't)â”‚
â”‚  âš ï¸  Fragile: Mock QuestApi used in production DI setup                    â”‚
â”‚  âš ï¸  Fragile: Platform notifications exist but integration unclear          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DEPENDENCY INJECTION FLOW                         â”‚
â”‚                                                                             â”‚
â”‚  ğŸ—ï¸ CommonKoinModule                                                        â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€ dataModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€ Provides: Repositories, Database, Settings â”‚
â”‚     â”‚                      â””â”€â”€â”€ Provides: TimeProvider, RewardService      â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€ domainModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Provides: TaskNotificationService        â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€ notificationsModule â”€â”€â”€â”€â”€â”€â”€ Provides: Platform-specific notifiers   â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€ focusModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Provides: QuestStore (âŒ MISSING)        â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€ onboardingModule â”€â”€â”€â”€â”€â”€â”€â”€â”€ Provides: OnboardingStore (âŒ MISSING)   â”‚
â”‚     â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Dependency Relationships:**

1. **QuestStore** â†’ HeroRepository + QuestRepository + RewardService + QuestPlanner
2. **QuestPlanner** â†’ QuestResolver â†’ RewardService â†’ StatusEffectRepository
3. **UI Components** â†’ Stores â†’ Services â†’ Repositories â†’ Database/APIs
4. **Platform Layer** â†’ Feature Layer â†’ Domain Layer â†’ Data Layer

**Critical Path for Implementation:**

1. Implement missing Store classes to fix DI failures
2. Create ViewModels to connect UI to domain logic
3. Build missing Quest Hub screen as central navigation point
4. Connect Timer selection to actual quest execution flow